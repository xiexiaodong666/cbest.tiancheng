<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.welfare.persist.mapper.SupplierStoreExMapper">
    <select id="listWithMerchant" resultType="com.welfare.persist.dto.SupplierStoreWithMerchantDTO">
        SELECT
        store_code as storeCode,
        store_name as storeName,
        m.mer_name as merName,
        ss.mer_code as merCode,
        ss.STATUS  as status,
        ss.create_time as createTime
        FROM
        supplier_store ss
        LEFT JOIN merchant m ON ss.mer_code = m.mer_code
        <where>
            <if test="req.merCode!=null and req.merCode!=''">
                and ss.mer_code=#{req.merCode}
            </if>
            <if test="req.storeName!=null and req.storeName!=''">
                and ss.storeName like concat('%',#{req.storeName},'%')
            </if>
            <if test="req.storeCode!=null and req.storeCode!=''">
                and ss.store_code=#{req.storeCode}
            </if>
            <if test="req.startTime!=null">
                and ss.create_time &gt;= #{req.startTime}
            </if>
            <if test="req.endTime!=null">
                and ss.create_time &lt;= #{req.endTime}
            </if>
        </where>
    </select>
</mapper>